jQuery(function($){"use strict";var e=$(document),t="";document.getElementsByClassName("tpfw-image_picker").length&&$(".tpfw-image_picker").tpfwImagePicker(),console.log("Fichier charg√©"),document.getElementsByClassName("tpfw-link").length&&(console.log("Link detected"),$(".tpfw-link").tpfwLink()),$(".tpfw-color:not(.child-field)").length&&$(".tpfw-color:not(.child-field)").wpColorPicker(),$(".tpfw-icon_picker:not(.child-field)").length&&$(".tpfw-icon_picker:not(.child-field) select").fontIconPicker(),document.getElementsByClassName("tpfw-datetime").length&&$(".tpfw-datetime input").each(function(){var e=$(this).data();$(this).datetimepicker(e)}),document.getElementsByClassName("tpfw-checkboxes")&&e.on("change",'.tpfw-checkboxes input[type="checkbox"]',function(){var e=$(this).closest("ul").find('input[type="checkbox"]:checked').map(function(){return this.value}).get().join(",");$(this).closest("ul").prev("input.tpfw_value").val(e).trigger("change")}),$(".tpfw-select-multiple").length&&($(".tpfw-select-multiple:not(.child-field)").selectize({plugins:["remove_button","drag_drop"]}),e.on("change",".tpfw-select-multiple",function(){$(this).closest("div").find(".tpfw_value").val($(this).val()).trigger("change")})),$(".tpfw-autocomplete select").length&&($(".tpfw-autocomplete:not(.child-field) select").tpfwAutocomplete(),e.on("change",".tpfw-autocomplete select",function(){$(this).closest("div").find(".tpfw_value").val($(this).val()).trigger("change")}));var n=function(e){if(window.hasOwnProperty("google")){var t=e.find(".tpfw-map");t.length&&t.tpfwMap().addClass("map_loaded")}var n=e.find(".tpfw-color");n.length&&n.wpColorPicker();var a=e.find(".tpfw-icon_picker select");a.length&&a.fontIconPicker();var i=e.find(".tpfw-datetime input");i.length&&i.each(function(){var e=$(this).data();$(this).datetimepicker(e)});var o=e.find(".tpfw-repeater");o.length&&!o.hasClass("repeater_loaded")&&o.addClass("repeater_loaded").tpfwRepeater(),e.find(".tpfw-select-multiple").length&&e.find(".tpfw-select-multiple:not(.child-field)").selectize({plugins:["remove_button","drag_drop"]}),e.find(".tpfw-autocomplete").length&&e.find(".tpfw-autocomplete:not(.child-field) select").tpfwAutocomplete();var p=e.find("div[data-dependency]");p.length&&p.initWidgetDependency()};if(e.on("widget-updated",function(e,t){n(t)}),e.on("widget-added",function(e,t){n(t)}),e.on("click","#widgets-right .widget-title",function(e){var t=$(this);setTimeout(function(){var e=t.closest(".open");if(e.length){var n=e.find(".tpfw-map");n.length&&!n.hasClass("map_loaded")&&n.tpfwMap();var a=e.find(".tpfw-repeater");a.length&&!a.hasClass("repeater_loaded")&&a.addClass("repeater_loaded").tpfwRepeater()}},300),e.preventDefault()}),e.on("tpfw-repeater-item-opened",function(e,t){var n=t.find(".tpfw-map");n.length&&n.tpfwMap()}),e.on("click",".tpfw_group .group_nav a",function(t){var n=$(this),a=n.attr("href");n.closest("ul").find(".active").removeClass("active"),n.addClass("active"),$(".tpfw_group .group_item.active").removeClass("active");var i=$(".tpfw_group "+a);i.addClass("active"),$(".tpfw_group "+a+" .map_loaded").length&&(i.find(".tpfw-map").hasClass("map_refresh")||i.find(".tpfw-map").tpfwMap().addClass("map_refresh")),e.trigger("tpfw_group_active",[i]),t.preventDefault()}),$("#menu-to-edit .menu-item .item-edit").click(function(e){var t=$(this);setTimeout(function(){var e=t.closest(".menu-item");if(e.length){var n=e.find(".tpfw-map");n.length&&!n.hasClass("map_loaded")&&n.tpfwMap()}},300),e.preventDefault()}),window.hasOwnProperty("pagenow"))if("widgets"===pagenow){var a=$("#widgets-right").find("div[data-dependency]");a.length&&a.initWidgetDependency()}else"nav-menus"===pagenow?$("#menu-to-edit div[data-dependency]").length&&$("#menu-to-edit div[data-dependency]").initMenuDependency():$("[data-dependency]").initDependency();else $("[data-dependency]").length&&$("[data-dependency]").initDependency();$("input.tpfw-manage_box").length&&($("input.tpfw-manage_box").each(function(){var e=$(this),t="";1==e.val()?(t="checked",e.closest(".postbox").removeClass("postbox--disabled")):e.closest(".postbox").addClass("postbox--disabled"),e.closest(".postbox").find(".hndle").before('<label class="tpfw-controlbox"><input type="checkbox" '+t+' data-name="'+e.attr("name")+'"/>'+e.data("label")+"</label>")}),$(document).on("change",".tpfw-controlbox input",function(e){var t=$(this),n=t.closest(".postbox"),a=0;t.is(":checked")?(n.removeClass("postbox--disabled"),a=1):n.addClass("postbox--disabled"),$("input[name="+t.data("name")+"]").val(a).change(),e.preventDefault(),e.stopPropagation()})),$(".tpfw-manage_group").length&&($("input.tpfw-manage_group").on("change",function(e){var t=$(this);t.is(":checked")?t.closest(".tpfw_form_row").removeClass("group-disabled"):t.closest(".tpfw_form_row").addClass("group-disabled"),e.preventDefault()}),$("input.tpfw-manage_group").change())});